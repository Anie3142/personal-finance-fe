(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8300],{90369:function(e,t,s){Promise.resolve().then(s.bind(s,514))},514:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Q},dynamic:function(){return z}});var n=s(57437),a=s(2265),r=s(27648),l=s(99397),i=s(71621),c=s(73247),o=s(31047),d=s(32489),u=s(70525),h=s(3085),x=s(10407),m=s(12381),j=s(40279),g=s(79820),p=s(15291),f=s(69174),v=s(68245),y=s(84086),N=s(62685),b=s(92333),w=s(29827),C=s(11713),k=s(21770),S=s(71837);let Z=e=>{let t={};return e.forEach(e=>{let s=e.date;t[s]||(t[s]=[]),t[s].push(e)}),t},T=e=>{let t=new Date,s=t.getFullYear(),n=t.getMonth();switch(e){case"this-month":return{from:new Date(s,n,1).toISOString().split("T")[0],to:new Date(s,n+1,0).toISOString().split("T")[0]};case"last-month":return{from:new Date(s,n-1,1).toISOString().split("T")[0],to:new Date(s,n,0).toISOString().split("T")[0]};case"last-3-months":return{from:new Date(s,n-2,1).toISOString().split("T")[0],to:t.toISOString().split("T")[0]};default:return{}}};function _(){let e=(0,w.NL)(),[t,s]=(0,a.useState)(""),[_,z]=(0,a.useState)([]),[Q,A]=(0,a.useState)(null),[O,I]=(0,a.useState)(!1),[q,D]=(0,a.useState)({dateRange:"this-month",account:"all",category:"all",type:"all"}),{data:E,isLoading:F,error:P}=(0,C.a)({queryKey:["transactions",q,t],queryFn:async()=>{let e=T(q.dateRange);return S.Z.getTransactions({...e,account_id:"all"!==q.account?q.account:void 0,category_id:"all"!==q.category?q.category:void 0,type:"all"!==q.type?"income"===q.type?"credit":"debit":void 0,search:t||void 0,limit:100})}}),{data:K}=(0,C.a)({queryKey:["categories"],queryFn:()=>S.Z.getCategories()}),{data:L}=(0,C.a)({queryKey:["accounts"],queryFn:()=>S.Z.getAccounts()});(0,k.D)({mutationFn:e=>{let{ids:t,categoryId:s}=e;return S.Z.bulkCategorize(t,s)},onSuccess:()=>{e.invalidateQueries({queryKey:["transactions"]}),z([])}});let V=(null==E?void 0:E.transactions)||[],B=(null==K?void 0:K.categories)||[],R=(null==L?void 0:L.accounts)||[],Y=Z(V),X=e=>{A(e),I(!0)},G=e=>{z(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return F?(0,n.jsxs)("div",{className:"container py-6",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Transactions"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),(0,n.jsx)(b.oY,{variant:"transaction",count:8})]}):(0,n.jsxs)("div",{className:"container py-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Transactions"}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:[(null==E?void 0:E.total)||0," transactions"]})]}),(0,n.jsx)(r.default,{href:"/transactions/new",children:(0,n.jsxs)(m.z,{children:[(0,n.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})})]}),0!==V.length||F?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Zb,{className:"mb-6",children:(0,n.jsx)(g.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,n.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,n.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(j.I,{placeholder:"Search transactions...",value:t,onChange:e=>s(e.target.value),className:"pl-9"})]}),(0,n.jsxs)(p.Ph,{value:q.dateRange,onValueChange:e=>D({...q,dateRange:e}),children:[(0,n.jsxs)(p.i4,{className:"w-[160px]",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),(0,n.jsx)(p.ki,{})]}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"this-month",children:"This month"}),(0,n.jsx)(p.Ql,{value:"last-month",children:"Last month"}),(0,n.jsx)(p.Ql,{value:"last-3-months",children:"Last 3 months"}),(0,n.jsx)(p.Ql,{value:"all",children:"All time"})]})]}),(0,n.jsxs)(p.Ph,{value:q.account,onValueChange:e=>D({...q,account:e}),children:[(0,n.jsx)(p.i4,{className:"w-[180px]",children:(0,n.jsx)(p.ki,{placeholder:"All accounts"})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"all",children:"All accounts"}),R.map(e=>(0,n.jsx)(p.Ql,{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)(p.Ph,{value:q.category,onValueChange:e=>D({...q,category:e}),children:[(0,n.jsx)(p.i4,{className:"w-[180px]",children:(0,n.jsx)(p.ki,{placeholder:"All categories"})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"all",children:"All categories"}),B.map(e=>(0,n.jsxs)(p.Ql,{value:e.id,children:[e.icon," ",e.name]},e.id))]})]}),(0,n.jsxs)(p.Ph,{value:q.type,onValueChange:e=>D({...q,type:e}),children:[(0,n.jsx)(p.i4,{className:"w-[130px]",children:(0,n.jsx)(p.ki,{placeholder:"All types"})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"all",children:"All types"}),(0,n.jsx)(p.Ql,{value:"income",children:"Income only"}),(0,n.jsx)(p.Ql,{value:"expenses",children:"Expenses only"})]})]})]})})}),_.length>0&&(0,n.jsxs)("div",{className:"mb-4 p-3 rounded-lg bg-primary/10 border border-primary/20 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(v.X,{checked:_.length===V.length,onCheckedChange:()=>{_.length===V.length?z([]):z(V.map(e=>e.id))}}),(0,n.jsxs)("span",{className:"text-sm font-medium",children:[_.length," selected"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.z,{variant:"outline",size:"sm",children:"Categorize"}),(0,n.jsx)(m.z,{variant:"outline",size:"sm",children:"Export"}),(0,n.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>z([]),children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})]})]}),(0,n.jsx)("div",{className:"space-y-6",children:Object.entries(Y).map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm py-2 mb-3 z-10",children:(0,n.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:(0,y.p6)(t)})}),(0,n.jsx)(g.Zb,{children:(0,n.jsx)(g.aY,{className:"p-0 divide-y divide-border",children:s.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-4 p-4 hover:bg-secondary/50 transition-colors cursor-pointer",onClick:()=>X(e),children:[(0,n.jsx)(v.X,{checked:_.includes(e.id),onCheckedChange:()=>G(e.id),onClick:e=>e.stopPropagation()}),(0,n.jsx)("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center ".concat("credit"===e.type?"bg-success/10":"bg-destructive/10"),children:"credit"===e.type?(0,n.jsx)(u.Z,{className:"h-5 w-5 text-success"}):(0,n.jsx)(h.Z,{className:"h-5 w-5 text-destructive"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"font-medium truncate",children:e.merchant_name||e.description}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.description})]}),e.category_name&&(0,n.jsx)(f.C,{variant:"secondary",style:{backgroundColor:e.category_color||"#94a3b8",color:"white"},children:e.category_name}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsxs)("p",{className:"font-semibold ".concat("credit"===e.type?"text-success":""),children:["credit"===e.type?"+":"-",(0,y.xG)(Number(e.amount))]})}),(0,n.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]},e.id))})})]},t)})}),(null==E?void 0:E.has_more)&&(0,n.jsxs)("div",{className:"mt-8 text-center",children:[(0,n.jsx)(m.z,{variant:"outline",children:"Load more transactions"}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Showing ",V.length," of ",E.total," transactions"]})]})]}):(0,n.jsx)(b.ub,{icon:(0,n.jsx)(i.Z,{className:"h-8 w-8"}),title:"No transactions found",description:"No transactions match your current filters. Try adjusting your filters or add a new transaction.",action:(0,n.jsx)(r.default,{href:"/transactions/new",children:(0,n.jsxs)(m.z,{children:[(0,n.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})})}),(0,n.jsx)(N.Kb,{transaction:Q,open:O,onOpenChange:I})]})}let z="force-dynamic";function Q(){return(0,n.jsx)(_,{})}},69174:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var n=s(57437);s(2265);var a=s(90535),r=s(93448);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,n.jsx)("div",{className:(0,r.cn)(l({variant:s}),t),...a})}}},function(e){e.O(0,[8590,2972,9880,9331,2661,588,5432,1561,9763,1713,8996,7853,776,5189,5599,2333,2971,2117,1744],function(){return e(e.s=90369)}),_N_E=e.O()}]);