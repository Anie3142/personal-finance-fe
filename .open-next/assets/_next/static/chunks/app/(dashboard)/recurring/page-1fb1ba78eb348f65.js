(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7386],{12732:function(e,t,n){Promise.resolve().then(n.bind(n,75808))},75808:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R},dynamic:function(){return C}});var r=n(57437),a=n(2265),s=n(99397),i=n(71637),c=n(31047),o=n(15868),l=n(79205);let u=(0,l.Z)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);var d=n(18930);let m=(0,l.Z)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var f=n(12381),x=n(79820),g=n(69174),h=n(17168),p=n(84086),v=n(62685),y=n(92333),j=n(29827),b=n(11713),N=n(21770),w=n(71837);function D(){let e=(0,j.NL)(),[t,n]=(0,a.useState)(!1),[l,D]=(0,a.useState)(null),{data:C,isLoading:R}=(0,b.a)({queryKey:["recurring"],queryFn:()=>w.Z.getRecurring()}),{data:k}=(0,b.a)({queryKey:["recurring-upcoming"],queryFn:()=>w.Z.getRecurringUpcoming()}),_=(0,N.D)({mutationFn:e=>w.Z.createRecurring(e),onSuccess:()=>{e.invalidateQueries({queryKey:["recurring"]}),e.invalidateQueries({queryKey:["recurring-upcoming"]}),n(!1),D(null)}}),F=(0,N.D)({mutationFn:e=>{let{id:t,data:n}=e;return w.Z.updateRecurring(t,n)},onSuccess:()=>{e.invalidateQueries({queryKey:["recurring"]}),e.invalidateQueries({queryKey:["recurring-upcoming"]}),n(!1),D(null)}}),A=(0,N.D)({mutationFn:e=>w.Z.deleteRecurring(e),onSuccess:()=>{e.invalidateQueries({queryKey:["recurring"]}),e.invalidateQueries({queryKey:["recurring-upcoming"]})}}),M=(null==C?void 0:C.recurring)||[],T=(null==k?void 0:k.upcoming)||[],q=(null==k?void 0:k.total_due_30_days)||0,Z=M.filter(e=>e.amount>0&&"active"===e.status),z=M.filter(e=>"paused"===e.status),I=e=>{D(e),n(!0)},S=e=>{confirm("Are you sure you want to delete this recurring transaction?")&&A.mutate(e)},E=e=>{F.mutate({id:e.id,data:{status:"active"===e.status?"paused":"active"}})},K=e=>{let t=new Date(e),n=new Date;return n.setHours(0,0,0,0),Math.ceil((t.getTime()-n.getTime())/864e5)};return R?(0,r.jsxs)("div",{className:"container py-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Recurring"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),(0,r.jsx)(y.oY,{variant:"card",count:4})]}):(0,r.jsxs)("div",{className:"container py-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Recurring"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage subscriptions and bills"})]}),(0,r.jsxs)(f.z,{onClick:()=>{D(null),n(!0)},children:[(0,r.jsx)(s.Z,{className:"h-4 w-4 mr-2"}),"Add Recurring"]})]}),0===M.length?(0,r.jsx)(y.ub,{icon:(0,r.jsx)(i.Z,{className:"h-8 w-8"}),title:"No recurring transactions",description:"Add your subscriptions, bills, and recurring income to track them automatically.",action:(0,r.jsxs)(f.z,{onClick:()=>n(!0),children:[(0,r.jsx)(s.Z,{className:"h-4 w-4 mr-2"}),"Add Recurring"]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsx)(x.Zb,{children:(0,r.jsxs)(x.aY,{className:"pt-6",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Due Next 30 Days"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:(0,p.xG)(q)})]})}),(0,r.jsx)(x.Zb,{children:(0,r.jsxs)(x.aY,{className:"pt-6",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Subscriptions"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:Z.length})]})}),(0,r.jsx)(x.Zb,{children:(0,r.jsxs)(x.aY,{className:"pt-6",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paused"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:z.length})]})})]}),T.length>0&&(0,r.jsxs)(x.Zb,{className:"mb-6",children:[(0,r.jsx)(x.Ol,{children:(0,r.jsx)(x.ll,{className:"text-lg",children:"Upcoming This Month"})}),(0,r.jsx)(x.aY,{children:(0,r.jsx)("div",{className:"space-y-3",children:T.slice(0,5).map(e=>{let t=K(e.next_date);return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center text-xl",children:"\uD83D\uDCC5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:0===t?"Due today":1===t?"Due tomorrow":"Due in ".concat(t," days")})]})]}),(0,r.jsx)("p",{className:"font-semibold",children:(0,p.xG)(Number(e.amount))})]},e.id)})})})]}),(0,r.jsxs)(h.mQ,{defaultValue:"active",children:[(0,r.jsxs)(h.dr,{className:"mb-4",children:[(0,r.jsxs)(h.SP,{value:"active",children:["Active (",Z.length,")"]}),(0,r.jsxs)(h.SP,{value:"paused",children:["Paused (",z.length,")"]})]}),(0,r.jsx)(h.nU,{value:"active",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map(e=>(0,r.jsx)(x.Zb,{className:"group",children:(0,r.jsxs)(x.aY,{className:"pt-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center text-2xl",children:"\uD83D\uDCE6"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground capitalize",children:e.frequency})]})]}),(0,r.jsx)("p",{className:"font-bold",children:(0,p.xG)(Number(e.amount))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Next: ",(0,p.p6)(e.next_date)]})]}),e.category_name&&(0,r.jsx)(g.C,{variant:"secondary",children:e.category_name})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(f.z,{variant:"outline",size:"sm",onClick:()=>I(e),children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})}),(0,r.jsx)(f.z,{variant:"outline",size:"sm",onClick:()=>E(e),children:(0,r.jsx)(u,{className:"h-4 w-4"})}),(0,r.jsx)(f.z,{variant:"outline",size:"sm",onClick:()=>S(e.id),children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})]})]})},e.id))})}),(0,r.jsx)(h.nU,{value:"paused",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(e=>(0,r.jsx)(x.Zb,{className:"opacity-60 group",children:(0,r.jsxs)(x.aY,{className:"pt-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-lg bg-muted flex items-center justify-center text-2xl",children:"\uD83D\uDCE6"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:e.name}),(0,r.jsx)(g.C,{variant:"secondary",children:"Paused"})]})]}),(0,r.jsx)("p",{className:"font-bold",children:(0,p.xG)(Number(e.amount))})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>E(e),children:[(0,r.jsx)(m,{className:"h-4 w-4 mr-1"}),"Resume"]}),(0,r.jsx)(f.z,{variant:"outline",size:"sm",onClick:()=>S(e.id),children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})]})]})},e.id))})})]})]}),(0,r.jsx)(v.pW,{recurring:l?{id:l.id,name:l.name,icon:"\uD83D\uDCE6",amount:Number(l.amount),frequency:l.frequency.charAt(0).toUpperCase()+l.frequency.slice(1),nextDate:l.next_date,category:l.category_id,account:l.account_id,reminderDays:l.reminder_days,type:"bill"}:null,open:t,onOpenChange:e=>{n(e),e||D(null)},onSave:e=>{l?F.mutate({id:l.id,data:{name:e.name,icon:e.icon,amount:e.amount,frequency:e.frequency.toLowerCase(),next_date:e.nextDate,category_id:e.category,account_id:e.account,reminder_days:e.reminderDays}}):_.mutate({name:e.name,icon:e.icon,amount:e.amount,frequency:e.frequency.toLowerCase(),start_date:e.nextDate,category_id:e.category,account_id:e.account,reminder_days:e.reminderDays})}})]})}let C="force-dynamic";function R(){return(0,r.jsx)(D,{})}},69174:function(e,t,n){"use strict";n.d(t,{C:function(){return c}});var r=n(57437);n(2265);var a=n(90535),s=n(93448);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:n,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)(i({variant:n}),t),...a})}},17168:function(e,t,n){"use strict";n.d(t,{SP:function(){return l},dr:function(){return o},mQ:function(){return c},nU:function(){return u}});var r=n(57437),a=n(2265),s=n(20271),i=n(93448);let c=s.fC,o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...a})});o.displayName=s.aV.displayName;let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n),...a})});l.displayName=s.xz.displayName;let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...a})});u.displayName=s.VY.displayName},1353:function(e,t,n){"use strict";n.d(t,{Pc:function(){return b},ck:function(){return M},fC:function(){return A}});var r=n(2265),a=n(6741),s=n(9923),i=n(98575),c=n(73966),o=n(99255),l=n(82912),u=n(26606),d=n(80886),m=n(29114),f=n(57437),x="rovingFocusGroup.onEntryFocus",g={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[p,v,y]=(0,s.B)(h),[j,b]=(0,c.b)(h,[y]),[N,w]=j(h),D=r.forwardRef((e,t)=>(0,f.jsx)(p.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(p.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(C,{...e,ref:t})})}));D.displayName=h;var C=r.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:s,loop:c=!1,dir:o,currentTabStopId:p,defaultCurrentTabStopId:y,onCurrentTabStopIdChange:j,onEntryFocus:b,preventScrollOnEntryFocus:w=!1,...D}=e,C=r.useRef(null),R=(0,i.e)(t,C),k=(0,m.gm)(o),[_,A]=(0,d.T)({prop:p,defaultProp:null!=y?y:null,onChange:j,caller:h}),[M,T]=r.useState(!1),q=(0,u.W)(b),Z=v(n),z=r.useRef(!1),[I,S]=r.useState(0);return r.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(x,q),()=>e.removeEventListener(x,q)},[q]),(0,f.jsx)(N,{scope:n,orientation:s,dir:k,loop:c,currentTabStopId:_,onItemFocus:r.useCallback(e=>A(e),[A]),onItemShiftTab:r.useCallback(()=>T(!0),[]),onFocusableItemAdd:r.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>S(e=>e-1),[]),children:(0,f.jsx)(l.WV.div,{tabIndex:M||0===I?-1:0,"data-orientation":s,...D,ref:R,style:{outline:"none",...e.style},onMouseDown:(0,a.Mj)(e.onMouseDown,()=>{z.current=!0}),onFocus:(0,a.Mj)(e.onFocus,e=>{let t=!z.current;if(e.target===e.currentTarget&&t&&!M){let t=new CustomEvent(x,g);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=Z().filter(e=>e.focusable);F([e.find(e=>e.active),e.find(e=>e.id===_),...e].filter(Boolean).map(e=>e.ref.current),w)}}z.current=!1}),onBlur:(0,a.Mj)(e.onBlur,()=>T(!1))})})}),R="RovingFocusGroupItem",k=r.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:c,children:u,...d}=e,m=(0,o.M)(),x=c||m,g=w(R,n),h=g.currentTabStopId===x,y=v(n),{onFocusableItemAdd:j,onFocusableItemRemove:b,currentTabStopId:N}=g;return r.useEffect(()=>{if(s)return j(),()=>b()},[s,j,b]),(0,f.jsx)(p.ItemSlot,{scope:n,id:x,focusable:s,active:i,children:(0,f.jsx)(l.WV.span,{tabIndex:h?0:-1,"data-orientation":g.orientation,...d,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{s?g.onItemFocus(x):e.preventDefault()}),onFocus:(0,a.Mj)(e.onFocus,()=>g.onItemFocus(x)),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){g.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let a=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return _[a]}(e,g.orientation,g.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=y().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){var n,r;"prev"===t&&a.reverse();let s=a.indexOf(e.currentTarget);a=g.loop?(n=a,r=s+1,n.map((e,t)=>n[(r+t)%n.length])):a.slice(s+1)}setTimeout(()=>F(a))}}),children:"function"==typeof u?u({isCurrentTabStop:h,hasTabStop:null!=N}):u})})});k.displayName=R;var _={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}var A=D,M=k},20271:function(e,t,n){"use strict";n.d(t,{VY:function(){return M},aV:function(){return F},fC:function(){return _},xz:function(){return A}});var r=n(2265),a=n(6741),s=n(73966),i=n(1353),c=n(71599),o=n(82912),l=n(29114),u=n(80886),d=n(99255),m=n(57437),f="Tabs",[x,g]=(0,s.b)(f,[i.Pc]),h=(0,i.Pc)(),[p,v]=x(f),y=r.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:i="horizontal",dir:c,activationMode:x="automatic",...g}=e,h=(0,l.gm)(c),[v,y]=(0,u.T)({prop:r,onChange:a,defaultProp:null!=s?s:"",caller:f});return(0,m.jsx)(p,{scope:n,baseId:(0,d.M)(),value:v,onValueChange:y,orientation:i,dir:h,activationMode:x,children:(0,m.jsx)(o.WV.div,{dir:h,"data-orientation":i,...g,ref:t})})});y.displayName=f;var j="TabsList",b=r.forwardRef((e,t)=>{let{__scopeTabs:n,loop:r=!0,...a}=e,s=v(j,n),c=h(n);return(0,m.jsx)(i.fC,{asChild:!0,...c,orientation:s.orientation,dir:s.dir,loop:r,children:(0,m.jsx)(o.WV.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});b.displayName=j;var N="TabsTrigger",w=r.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,disabled:s=!1,...c}=e,l=v(N,n),u=h(n),d=R(l.baseId,r),f=k(l.baseId,r),x=r===l.value;return(0,m.jsx)(i.ck,{asChild:!0,...u,focusable:!s,active:x,children:(0,m.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...c,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(r)}),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(r)}),onFocus:(0,a.Mj)(e.onFocus,()=>{let e="manual"!==l.activationMode;x||s||!e||l.onValueChange(r)})})})});w.displayName=N;var D="TabsContent",C=r.forwardRef((e,t)=>{let{__scopeTabs:n,value:a,forceMount:s,children:i,...l}=e,u=v(D,n),d=R(u.baseId,a),f=k(u.baseId,a),x=a===u.value,g=r.useRef(x);return r.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(c.z,{present:s||x,children:n=>{let{present:r}=n;return(0,m.jsx)(o.WV.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:f,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:r&&i})}})});function R(e,t){return"".concat(e,"-trigger-").concat(t)}function k(e,t){return"".concat(e,"-content-").concat(t)}C.displayName=D;var _=y,F=b,A=w,M=C}},function(e){e.O(0,[8590,9880,9331,2661,588,5432,1561,9763,1713,8996,7853,776,4622,5599,2333,2971,2117,1744],function(){return e(e.s=12732)}),_N_E=e.O()}]);