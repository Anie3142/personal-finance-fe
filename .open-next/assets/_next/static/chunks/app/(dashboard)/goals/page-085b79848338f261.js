(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3815],{42225:function(e,s,t){Promise.resolve().then(t.bind(t,33786))},58896:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},70525:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},27648:function(e,s,t){"use strict";t.d(s,{default:function(){return l.a}});var a=t(72972),l=t.n(a)},33786:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z},dynamic:function(){return _}});var a=t(57437),l=t(2265),n=t(27648),r=t(99397),c=t(58896),i=t(10407),d=t(70525),o=t(15868),m=t(18930),u=t(12381),x=t(79820),h=t(7204),g=t(84086),j=t(62685),N=t(92333),p=t(29827),f=t(11713),b=t(21770),v=t(71837);function y(){let e=(0,p.NL)(),[s,t]=(0,l.useState)(!1),[y,_]=(0,l.useState)(null),{data:Z,isLoading:w}=(0,f.a)({queryKey:["goals"],queryFn:()=>v.Z.getGoals()}),k=(0,b.D)({mutationFn:e=>v.Z.createGoal(e),onSuccess:()=>{e.invalidateQueries({queryKey:["goals"]}),t(!1),_(null)}}),G=(0,b.D)({mutationFn:e=>{let{id:s,data:t}=e;return v.Z.updateGoal(s,t)},onSuccess:()=>{e.invalidateQueries({queryKey:["goals"]}),t(!1),_(null)}}),C=(0,b.D)({mutationFn:e=>v.Z.deleteGoal(e),onSuccess:()=>{e.invalidateQueries({queryKey:["goals"]})}}),S=(null==Z?void 0:Z.goals)||[],D=S.filter(e=>"active"===e.status),T=S.filter(e=>"completed"===e.status),z=e=>{_(e),t(!0)},F=e=>{confirm("Are you sure you want to delete this goal?")&&C.mutate(e)},O=S.reduce((e,s)=>e+Number(s.current_amount),0),Y=S.reduce((e,s)=>e+Number(s.target_amount),0);return w?(0,a.jsxs)("div",{className:"container py-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Goals"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),(0,a.jsx)(N.oY,{variant:"card",count:4})]}):(0,a.jsxs)("div",{className:"container py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Goals"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track your savings goals"})]}),(0,a.jsxs)(u.z,{onClick:()=>{_(null),t(!0)},children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-2"}),"New Goal"]})]}),0===S.length?(0,a.jsx)(N.ub,{icon:(0,a.jsx)(c.Z,{className:"h-8 w-8"}),title:"No goals yet",description:"Create your first savings goal to start tracking your progress.",action:(0,a.jsxs)(u.z,{onClick:()=>t(!0),children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-2"}),"Create Goal"]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsx)(x.Zb,{children:(0,a.jsxs)(x.aY,{className:"pt-6",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Saved"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-success",children:(0,g.xG)(O)})]})}),(0,a.jsx)(x.Zb,{children:(0,a.jsxs)(x.aY,{className:"pt-6",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Target"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(0,g.xG)(Y)})]})}),(0,a.jsx)(x.Zb,{children:(0,a.jsxs)(x.aY,{className:"pt-6",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Overall Progress"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[Y>0?Math.round(O/Y*100):0,"%"]})]})})]}),D.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["Active Goals (",D.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(e=>(0,a.jsxs)(x.Zb,{className:"group hover:shadow-md transition-shadow",children:[(0,a.jsx)(x.Ol,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:e.emoji}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.ll,{className:"text-base",children:e.name}),e.target_date&&(0,a.jsxs)(x.SZ,{children:["Target: ",new Date(e.target_date).toLocaleDateString()]})]})]}),(0,a.jsx)(n.default,{href:"/goals/".concat(e.id),children:(0,a.jsx)(i.Z,{className:"h-5 w-5 text-muted-foreground"})})]})}),(0,a.jsxs)(x.aY,{children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(h.E,{value:e.percentage,className:"h-3"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-success font-medium",children:(0,g.xG)(Number(e.current_amount))}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(0,g.xG)(Number(e.target_amount))})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.percentage,"% complete â€¢ ",(0,g.xG)(Number(e.target_amount)-Number(e.current_amount))," to go"]}),e.monthly_contribution_needed>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3"}),"Save ",(0,g.xG)(Number(e.monthly_contribution_needed)),"/month to reach your goal"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>z(e),children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>F(e.id),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]},e.id))})]}),T.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["Completed Goals (",T.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(e=>(0,a.jsxs)(x.Zb,{className:"bg-success/5 border-success/20",children:[(0,a.jsx)(x.Ol,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:e.emoji}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.ll,{className:"text-base",children:e.name}),(0,a.jsx)(x.SZ,{className:"text-success",children:"Completed! \uD83C\uDF89"})]})]})}),(0,a.jsx)(x.aY,{children:(0,a.jsx)("p",{className:"font-semibold text-success",children:(0,g.xG)(Number(e.target_amount))})})]},e.id))})]})]}),(0,a.jsx)(j.iP,{goal:y?{id:y.id,name:y.name,emoji:y.emoji,target:Number(y.target_amount),current:Number(y.current_amount),deadline:y.target_date||void 0}:null,open:s,onOpenChange:e=>{t(e),e||_(null)},onSave:e=>{y?G.mutate({id:y.id,data:{name:e.name,emoji:e.emoji,target_amount:e.target,target_date:e.deadline}}):k.mutate({name:e.name,emoji:e.emoji,target_amount:e.target,target_date:e.deadline,linked_account_id:e.linkedAccount})}})]})}let _="force-dynamic";function Z(){return(0,a.jsx)(y,{})}}},function(e){e.O(0,[8590,2972,9880,9331,2661,588,5432,1561,9763,1713,8996,7853,776,4622,5599,2333,2971,2117,1744],function(){return e(e.s=42225)}),_N_E=e.O()}]);